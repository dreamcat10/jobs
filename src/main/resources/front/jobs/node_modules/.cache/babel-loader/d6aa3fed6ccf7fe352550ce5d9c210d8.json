{"remainingRequest":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\babel-loader\\lib\\index.js!D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\H5\\project\\HBuilderProjects\\jobs\\src\\views\\news\\News.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\src\\views\\news\\News.vue","mtime":1678175755719},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673771979702},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\babel-loader\\lib\\index.js","mtime":1673772004305},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673771979702},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js","mtime":1673772000036}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\H5\\\\project\\\\HBuilderProjects\\\\jobs\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TopBar from \"@/components/common/TopBar.vue\";\nimport UserList from \"@/components/content/news/UserList.vue\";\nimport ChatRoom from \"@/components/content/news/ChatRoom.vue\";\nimport { chatRooms } from \"@/network/chat.js\";\nexport default {\n  name: \"News\",\n  data: function data() {\n    return {\n      rooms: [],\n      room: {},\n      index: 0,\n      emp: {},\n      logMap: []\n    };\n  },\n  activated: function activated() {\n    this.chat(this.$store.getters.getUser.id);\n    this.toChat(this.index);\n  },\n  components: {\n    TopBar: TopBar,\n    UserList: UserList,\n    ChatRoom: ChatRoom\n  },\n  methods: {\n    toChat: function toChat(index) {\n      this.index = index;\n      this.room = this.rooms[index];\n    },\n    chat: function () {\n      var _chat = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(id) {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return chatRooms(id).then(function (res) {\n                  var data = res.data;\n\n                  if (data.code == 200) {\n                    var rooms = data.data;\n                    _this.rooms = rooms;\n\n                    _this.$store.commit('SET_CHATROOMS', rooms);\n\n                    rooms.map(function (item) {\n                      var log = {\n                        roomId: '',\n                        logs: []\n                      };\n                      log.roomId = item.id, log.logs = [];\n\n                      _this.logMap.push(log);\n                    });\n\n                    _this.$store.commit('SET_CHATLOGS', _this.logMap);\n                  } else {\n                    console.log(\"获取聊天室信息失败\");\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function chat(_x) {\n        return _chat.apply(this, arguments);\n      }\n\n      return chat;\n    }()\n  }\n};",{"version":3,"sources":["News.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAeA,OAAA,MAAA,MAAA,gCAAA;AACA,OAAA,QAAA,MAAA,wCAAA;AACA,OAAA,QAAA,MAAA,wCAAA;AACA,SAAA,SAAA,QAAA,mBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,CAHA;AAIA,MAAA,GAAA,EAAA,EAJA;AAKA,MAAA,MAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,SAXA,uBAWA;AACA,SAAA,IAAA,CAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA;AACA,SAAA,MAAA,CAAA,KAAA,KAAA;AACA,GAdA;AAeA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,QAAA,EAAA,QAFA;AAGA,IAAA,QAAA,EAAA;AAHA,GAfA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,KADA,EACA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,IAAA,GAAA,KAAA,KAAA,CAAA,KAAA,CAAA;AACA,KAJA;AAKA,IAAA,IALA;AAAA;AAAA;AAAA,+CAKA,EALA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAMA,SAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,IAAA,GAAA,GAAA,CAAA,IAAA;;AACA,sBAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,wBAAA,KAAA,GAAA,IAAA,CAAA,IAAA;AACA,oBAAA,KAAA,CAAA,KAAA,GAAA,KAAA;;AACA,oBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,eAAA,EAAA,KAAA;;AACA,oBAAA,KAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,0BAAA,GAAA,GAAA;AACA,wBAAA,MAAA,EAAA,EADA;AAEA,wBAAA,IAAA,EAAA;AAFA,uBAAA;AAIA,sBAAA,GAAA,CAAA,MAAA,GAAA,IAAA,CAAA,EAAA,EACA,GAAA,CAAA,IAAA,GAAA,EADA;;AAEA,sBAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA;AACA,qBARA;;AASA,oBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,cAAA,EAAA,KAAA,CAAA,MAAA;AACA,mBAdA,MAcA;AACA,oBAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA;AACA,iBAnBA,CANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AApBA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"app\">\r\n\t\t<TopBar :index=2></TopBar>\r\n\t\t<el-container style=\"height: 90%;\">\r\n\t\t  <el-aside width=\"200px\">\r\n\t\t\t  <UserList :rooms=\"rooms\" @toChat=\"toChat\"></UserList>\r\n\t\t  </el-aside>\r\n\t\t  <el-main>\r\n\t\t\t  <ChatRoom :room=room :key=\"index\"></ChatRoom>\r\n\t\t  </el-main>\r\n\t\t</el-container>\r\n\t</div>\n</template>\n\n<script>\r\n\timport TopBar from \"@/components/common/TopBar.vue\"\r\n\timport UserList from \"@/components/content/news/UserList.vue\"\r\n\timport ChatRoom from \"@/components/content/news/ChatRoom.vue\"\r\n\timport {chatRooms} from \"@/network/chat.js\"\n\texport default{\n\t\tname: \"News\",\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\trooms: [],\r\n\t\t\t\troom: {},\r\n\t\t\t\tindex: 0,\r\n\t\t\t\temp: {},\r\n\t\t\t\tlogMap: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tactivated() {\t\t\t\r\n\t\t\tthis.chat(this.$store.getters.getUser.id)\r\n\t\t\tthis.toChat(this.index)\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tTopBar,\r\n\t\t\tUserList,\r\n\t\t\tChatRoom\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttoChat(index){\r\n\t\t\t\tthis.index = index\r\n\t\t\t\tthis.room = this.rooms[index]\r\n\t\t\t},\r\n\t\t\t async chat(id){\r\n\t\t\t\tawait chatRooms(id).then(res => {\r\n\t\t\t\t\tlet data = res.data\r\n\t\t\t\t\tif(data.code == 200){\r\n\t\t\t\t\t\tlet rooms = data.data\r\n\t\t\t\t\t\tthis.rooms = rooms\r\n\t\t\t\t\t\tthis.$store.commit('SET_CHATROOMS',rooms);\r\n\t\t\t\t\t\trooms.map(item => {\r\n\t\t\t\t\t\t\tlet log = {\r\n\t\t\t\t\t\t\t\troomId: '',\r\n\t\t\t\t\t\t\t\tlogs: []\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tlog.roomId = item.id,\r\n\t\t\t\t\t\t\tlog.logs = []\r\n\t\t\t\t\t\t\tthis.logMap.push(log)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.$store.commit('SET_CHATLOGS',this.logMap);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.log(\"获取聊天室信息失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\n\t}\n</script>\n\n<style> \r\n .el-aside {\n    background-color: #D3DCE6;\n    color: #333;\n    text-align: center;\n    line-height: 150px;\n  }\n  \n  .el-main {\n    background-color: #E9EEF3;\n    color: #333;\n    text-align: center;\n    line-height: 160px;\r\n\tpadding-right:0;\n  }\r\n  .el-container {\r\n    height: 100%;\r\n  }\n</style>\n"],"sourceRoot":"src/views/news"}]}