{"remainingRequest":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\H5\\project\\HBuilderProjects\\jobs\\src\\components\\content\\news\\ChatRoom.vue?vue&type=style&index=0&id=655dccb9&scoped=true&lang=css&","dependencies":[{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\src\\components\\content\\news\\ChatRoom.vue","mtime":1675346098387},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\css-loader\\index.js","mtime":1673771963705},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1673772000062},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\postcss-loader\\src\\index.js","mtime":1673772003590},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673771979702},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js","mtime":1673772000036}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t.chat-room{\n\t\theight: 100%;\n\t\t\n\t}\n\t.ul-scroll{\n\t\tlist-style: none;\n\t\tmargin: 0px;\n\t\tpadding: 0;\n\t\toverflow: auto;\n\t\tdisplay: inline-block;\n\t\twhite-space: nowrap;\n\t\theight: 100%; \n\t\twidth: 100%;\n\t\tbackground: #F9FAFD;\n\t\tborder-radius: 5px;\n\t}\n\t.ul-scroll-item{\n\t\tdisplay: flex;\n\t}\n\t.chat-list{\n\t\theight: 80%;\n\t\toverflow: hidden;\n\t\tline-height: 20px;\n\t\ttext-align: center;\n\t}\n\t.chat-text{\n\t\theight: 20%;\n\t}\n  .ul-scroll::-webkit-scrollbar {\n\twidth: 10px;\n\tbackground-color: #f9fafd;\n  }\n  .ul-scroll::-webkit-scrollbar-thumb {\n\tborder-radius: 5px;\n\tbackground-color: #e9eef3;\n  }\n/* .ul-scroll::-webkit-scrollbar-button {\n\twidth: 10px;\n\tbackground-color: #d3dce6;\n\t\n  } */\n  .ul-scroll::-webkit-scrollbar-track {\n\tborder-radius: 5px;\n  }\n\n",{"version":3,"sources":["ChatRoom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ChatRoom.vue","sourceRoot":"src/components/content/news","sourcesContent":["<template>\r\n\t<div class=\"chat-room\">\r\n\t\t<div class=\"chat-list\">\r\n\t\t\t<ul class=\"ul-scroll\" ref=\"chatLogList\">\r\n\t\t\t\t<li v-show=\"page <= MaxPage\">\r\n\t\t\t\t\t<el-button type=\"text\" icon=\"el-icon-time\" @click=\"getHistory()\">点击查看更多消息</el-button>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class=\"ul-scroll-item\" v-for=\"item in list\">\r\n\t\t\t\t\t<el-avatar :size=\"70\" :src=\"getPath(room.oavatar)\"></el-avatar>\r\n\t\t\t\t\t<p>{{item.context}}</p>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class=\"chat-text\">\r\n\t\t\t<el-input v-model=\"context\" ></el-input>\r\n\t\t</div>\r\n\t</div>\n</template>\n\n<script>\r\n\timport { mapGetters, mapState, mapActions } from 'vuex'\r\n\timport {chatLogs} from'@/network/chat.js'\r\n\texport default{\r\n\t\tname:'ChatRoom',\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tcontext: '',\r\n\t\t\t\tpage: 1,\r\n\t\t\t\ttotal: 1,\r\n\t\t\t\tsize: 1,\r\n\t\t\t\tdbLogs: [], //离线前接收的消息\r\n\t\t\t\tscrollFlag: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tprops:{\r\n\t\t\troom: {\r\n\t\t\t\ttype: Object\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState(['chatLogs']),\r\n\t\t\tlogList(){ //离线后接收的消息\r\n\t\t\t\tlet logList = []\r\n\t\t\t\tthis.chatLogs.forEach(item =>{\r\n\t\t\t\t\tif(item.roomId == this.room.id){\t\t\t\t\t\r\n\t\t\t\t\t\tlogList = item.logs;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn logList\r\n\t\t\t},\r\n\t\t\tMaxPage(){\r\n\t\t\t\treturn Math.ceil(this.total / this.size); \r\n\t\t\t},\r\n\t\t\tlist: {\r\n\t\t\t\tget(){\r\n\t\t\t\tthis.dbLogs.forEach(item => {\r\n\t\t\t\t\tthis.logList.unshift(item)\r\n\t\t\t\t})\r\n\t\t\t\treturn this.logList\r\n\t\t\t},\r\n\t\t\t\tset(val){\r\n\t\t\t\t\tconsole.log('val',val)\r\n\t\t\t\t\tthis.dbLogs = []\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.list = []\r\n\t\t\tif(this.scrollFlag){\r\n\t\t\t\tthis.scrollToBottom()\r\n\t\t\t}\r\n\t\t\tconsole.log(this.list)\r\n\t\t},\r\n\t\tupdated() {\r\n\t\t\tif(this.scrollFlag){\r\n\t\t\t\tthis.scrollToBottom()\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\troom(val){\r\n\t\t\t\tthis.getChatLogs()\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//滚动条保持最底部方法\r\n\t\t\tscrollToBottom () {\r\n\t\t\t  this.$nextTick(() => {\r\n\t\t\t\tthis.$refs.chatLogList.scrollTop = this.$refs.chatLogList.scrollHeight\r\n\t\t\t  })\r\n\t\t\t},\r\n\t\t\tgetHistory(){\r\n\t\t\t\t\r\n\t\t\t\tthis.getChatLogs()\r\n\t\t\t},\r\n\t\t\tgetPath(path){\r\n\t\t\t\treturn path ? require('D://jobs/img//'+ path) : '';\r\n\t\t\t},\r\n\t\t\tgetChatLogs(){\r\n\t\t\t\tchatLogs(this.room.id, this.page).then(res => {\r\n\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\tlet data = res.data\r\n\t\t\t\t\tif(data.code == 200){\r\n\t\t\t\t\t\tthis.dbLogs = data.data.recodes\r\n\t\t\t\t\t\tthis.total = data.data.total\r\n\t\t\t\t\t\tthis.size = data.data.size\r\n\t\t\t\t\t\tthis.page += 1\r\n\t\t\t\t\t\tconsole.log('page,max',this.page,this.MaxPage)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t  type: 'error',\r\n\t\t\t\t\t  message: '网络异常，请稍后重试！！！'\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\t.chat-room{\r\n\t\theight: 100%;\r\n\t\t\r\n\t}\r\n\t.ul-scroll{\r\n\t\tlist-style: none;\r\n\t\tmargin: 0px;\r\n\t\tpadding: 0;\r\n\t\toverflow: auto;\r\n\t\tdisplay: inline-block;\r\n\t\twhite-space: nowrap;\r\n\t\theight: 100%; \r\n\t\twidth: 100%;\r\n\t\tbackground: #F9FAFD;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\t.ul-scroll-item{\r\n\t\tdisplay: flex;\r\n\t}\r\n\t.chat-list{\r\n\t\theight: 80%;\r\n\t\toverflow: hidden;\r\n\t\tline-height: 20px;\r\n\t\ttext-align: center;\r\n\t}\r\n\t.chat-text{\r\n\t\theight: 20%;\r\n\t}\r\n  .ul-scroll::-webkit-scrollbar {\r\n\twidth: 10px;\r\n\tbackground-color: #f9fafd;\r\n  }\r\n  .ul-scroll::-webkit-scrollbar-thumb {\r\n\tborder-radius: 5px;\r\n\tbackground-color: #e9eef3;\r\n  }\r\n/* .ul-scroll::-webkit-scrollbar-button {\r\n\twidth: 10px;\r\n\tbackground-color: #d3dce6;\r\n\t\r\n  } */\r\n  .ul-scroll::-webkit-scrollbar-track {\r\n\tborder-radius: 5px;\r\n  }\r\n\n</style>\n"]}]}