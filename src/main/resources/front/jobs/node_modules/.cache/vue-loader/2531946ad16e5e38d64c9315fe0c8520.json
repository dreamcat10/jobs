{"remainingRequest":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\H5\\project\\HBuilderProjects\\jobs\\src\\views\\login\\Login.vue?vue&type=style&index=0&id=2529d779&scoped=true&lang=css&","dependencies":[{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\src\\views\\login\\Login.vue","mtime":1678355124714},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\css-loader\\index.js","mtime":1673771963705},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1673772000062},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\postcss-loader\\src\\index.js","mtime":1673772003590},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673771979702},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js","mtime":1673772000036}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.active{\n\tdisplay: none;\n}\n.login{\n\theight: 100vh;\n}\n.login-head{\n\tdisplay: flex;\n\theight: 10%;\n\twidth: 100%;\n\tbackground-color: #B3C0D1;\n\tline-height: 70px;\n\ttext-align: center;\n\tcolor: white;\n\tfont-size: 60px;\n\tfont-weight: 700;\n\tfont-family: \"华文行楷\";\n}\n.login-main{\n\theight: 90%;\n\tposition: relative;\n}\n.item{\n\tmargin: 0;\n}\n.login-box{\n\theight:80%;\n\twidth:30%;\n\tborder-radius: 20px;\n\tbox-shadow: 2px 2px 2px #E5E5E5, -2px -2px 2px #E5E5E5; \n\tbackground-color:#ffffff;\n\tposition:absolute;\n\ttop:15%;\n\tleft:35%;\n}\n.box-head{\n\twidth: 100%;\n\t\n}\n.text{\n\tmargin-top: 40px;\n\ttext-align: center;\n\tline-height: 60px;\n\tfont-size: 20px;\n}\n.ma-context{\n\tmargin-top: 50px;\n\tmargin-left: 20px;\n\twidth: 70%;\n}\n.mi-context{\n\tmargin-top: 50px;\n\tmargin-left: 20px;\n\twidth: 70%;\n}\n\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"login\">\r\n\t\t\t<div class=\"login-head\">\r\n\t\t\t\t<div class=\"left\" style=\"margin-top: 25px;\">\r\n\t\t\t\t\t<el-page-header @back=\"goBack\" title=\"返回首页\">\r\n\t\t\t\t\t</el-page-header>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"right\" style=\"width: 83%;\">Jobs招聘</div>\r\n\t\t\t\t</div>\r\n\t\t\t<div class=\"login-main\">\r\n\t\t\t\t<div class=\"login-box\">\r\n\t\t\t\t\t<div class=\"box-head\">\r\n\t\t\t\t\t\t<el-tooltip :class=\"{active: isChange}\" effect=\"light\" content=\"使用密码登录\" placement=\"right-start\">\r\n\t\t\t\t\t\t      <el-button icon=\"el-icon-key\" round @click=change()></el-button>\r\n\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t\t<el-tooltip style=\"margin: 0;\" :class=\"{active: !isChange}\" effect=\"light\" content=\"使用验证码登录\" placement=\"right-start\">\r\n\t\t\t\t\t\t      <el-button icon=\"el-icon-mobile-phone\" round @click=change()></el-button>\r\n\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t\t<div class=\"text\">登录</div>\r\n\t\t\t\t\t\t<div class=\"ma-context\" :class=\"{active: isChange}\">\r\n\t\t\t\t\t\t\t<el-form ref=\"form1\" :rules=\"rules\" :model=\"form1\" label-width=\"80px\">\r\n\t\t\t\t\t\t\t\t<el-form-item prop=\"phone\">\r\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"form1.phone\" placeholder=\"手机号\"></el-input>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<el-form-item prop=\"code\">\r\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"form1.code\"  placeholder=\"短信验证码\">\r\n\t\t\t\t\t\t\t\t\t\t<el-button slot=\"append\" type=\"primary\" \r\n\t\t\t\t\t\t\t\t\t\t:disabled=\"isDisable\" @click=\"sendCode('form1',form1.phone)\">{{buttonName}}</el-button>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t <el-form-item style=\"text-align: center;\">\r\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitCode('form1')\" :loading=\"isLoading\">登录</el-button>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<el-form-item prop=\"checked\">\r\n\t\t\t\t\t\t\t\t\t <el-checkbox v-model=\"form1.checked\">已阅读并同意《用户服务协议》和《隐私政策》</el-checkbox>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t\t\t\t<el-link href='/init' type=\"primary\" :underline=\"false\">没有账号？ 立即注册</el-link>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t</el-form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"mi-context\" :class=\"{active: !isChange}\">\r\n\t\t\t\t\t\t\t<el-form ref=\"form2\" :rules=\"rules\" :model=\"form2\" label-width=\"80px\">\r\n\t\t\t\t\t\t\t\t<el-form-item prop=\"phone\">\r\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"form2.phone\" placeholder=\"手机号\"></el-input>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<el-form-item prop=\"password\">\r\n\t\t\t\t\t\t\t\t\t<el-input :show-password=\"true\" v-model=\"form2.password\"  placeholder=\"密码\">\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t <el-form-item style=\"text-align: center;\">\r\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitPass('form2',form2.phone)\" :loading=isLoading>登录</el-button>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<el-form-item prop=\"checked\">\r\n\t\t\t\t\t\t\t\t\t <el-checkbox v-model=\"form2.checked\">已阅读并同意《用户服务协议》和《隐私政策》</el-checkbox>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t\t\t\t<el-link href='/init' type=\"primary\" :underline=\"false\">没有账号？ 立即注册</el-link>\r\n\t\t\t\t\t\t\t\t\t<el-link style=\"margin-left: 40px;\" href='/' type=\"primary\" :underline=\"false\">忘记密码？</el-link>\r\n\t\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\t</el-form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<router-view></router-view>\r\n\t</div>\n</template>\n\n<script>\r\n\timport {login,getCode} from \"@/network/login.js\"\r\n\timport {chatRooms} from \"@/network/chat.js\"\r\n\timport {createWebSocket} from \"@/api/websocket.js\"\r\n\t\n\texport default{\n\t\tname: \"Login\",\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tform1: {\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tcode: '',\r\n\t\t\t\t\tchecked: [],\r\n\t\t\t\t},\r\n\t\t\t\tform2: {\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tpassword: '',\r\n\t\t\t\t\tchecked: [],\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t  phone: [\r\n\t\t\t\t\t{ required: true, message: '请输入手机号', trigger: 'change'},\r\n\t\t\t\t\t{ len: 11, message: '请填写正确的手机号' , trigger: 'change'}\r\n\t\t\t\t  ],\r\n\t\t\t\t  code: [\r\n\t\t\t\t\t{ required: true, message: '请输入验证码', trigger: 'change'}\r\n\t\t\t\t  ],\r\n\t\t\t\t  checked: [\r\n\t\t\t\t\t{required: true , message: '请阅读并勾选上方协议',trigger: 'change'}\r\n\t\t\t\t   ],\r\n\t\t\t\t   password: [\r\n\t\t\t\t\t   {required: true , message: '密码不能为空',trigger: 'change'}\r\n\t\t\t\t   ]\r\n\t\t\t\t },\r\n\t\t\t\t isLoading: false,\r\n\t\t\t\t isChange: false,\r\n\t\t\t\t isDisable: false,\r\n\t\t\t\t buttonName: '获取验证码',\r\n\t\t\t\t time: 3,\r\n\t\t\t\t timer: null,\r\n\t\t\t\t logMap: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgoBack(){\r\n\t\t\t\tthis.$router.replace(\"/\")\r\n\t\t\t},\r\n\t\t\tchange(){\r\n\t\t\t\tthis.isChange = !this.isChange;\r\n\t\t\t},\r\n\t\t\tsendCode(formName,phone){\t\t\t\r\n\t\t\t    this.$refs[formName].validateField('phone',(msg) => {\r\n\t\t\t\t\tif(msg == ''){\r\n\t\t\t\t\t\tthis.isDisable = true;\r\n\t\t\t\t\t\tgetCode(phone).then((res) => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.countDown();\r\n\t\t\t\t\t\tthis.time = 3\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t})\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t},\t\t\t\r\n\t\t    countDown() {\r\n\t\t\t\tif (!this.timer) {\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t  if (this.time > 0 && this.time <= 60) {\r\n\t\t\t\t\tthis.buttonName = this.time + '秒后重新获取';\r\n\t\t\t\t\tthis.time--;\r\n\t\t\t\t  } else {\r\n\t\t\t\t\tthis.isDisable = false;\r\n\t\t\t\t\tthis.buttonName = '获取验证码';\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\tthis.timer = null;\r\n\t\t\t\t  }\r\n\t\t\t\t}, 1000);\r\n\t\t\t  }\r\n\t\t    },\r\n\t\t\tsubmitCode(formName) {\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tthis.$refs[formName].validateField(['phone','checked','code'],(msg) => {\r\n\t\t\t\t\tif(msg == ''){\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\tif(num == 3){\r\n\t\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\tthis.getEmp(this.form1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubmitPass(formName) {\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tthis.$refs[formName].validateField(['phone','checked','password'],(msg) => {\r\n\t\t\t\t\tif(msg == ''){\r\n\t\t\t\t\t\tnum ++;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\t\r\n\t\t\t\tif(num == 3){\r\n\t\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\tthis.getEmp(this.form2)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetEmp(form){\r\n\t\t\t\tlogin(form).then((res) => {\r\n\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif(data.code == 200){\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet empInfo = data.data;\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tthis.$store.commit('SET_USERINFO',empInfo);\r\n\t\t\t\t\t\tlet id = empInfo.id;\r\n\t\t\t\t\t\tcreateWebSocket(this.callback,id);\r\n\t\t\t\t\t\tthis.chat(id);\r\n\t\t\t\t\t\tthis.$router.replace('/');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$message.error(data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcallback(msg){\r\n\t\t\t\tthis.logMap = this.$store.getters.getLogs\r\n\t\t\t\tthis.logMap.map(item => {\r\n\t\t\t\t\tif(msg.chatRoomId == item.roomId){\r\n\t\t\t\t\t\titem.logs.push(msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.$store.commit('SET_CHATLOGS',this.logMap);\r\n\t\t\t},\r\n\t\t\tchat(id){\r\n\t\t\t\tchatRooms(id).then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tlet data = res.data\r\n\t\t\t\t\tif(data.code == 200){\r\n\t\t\t\t\t\tlet rooms = data.data\r\n\t\t\t\t\t\tthis.$store.commit('SET_CHATROOMS',rooms);\r\n\t\t\t\t\t\trooms.map(item => {\r\n\t\t\t\t\t\t\tlet log = {\r\n\t\t\t\t\t\t\t\troomId: '',\r\n\t\t\t\t\t\t\t\tlogs: []\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tlog.roomId = item.id,\r\n\t\t\t\t\t\t\tlog.logs = []\r\n\t\t\t\t\t\t\tthis.logMap.push(log)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.$store.commit('SET_CHATLOGS',this.logMap);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.log(\"获取聊天室信息失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\n\t}\n</script>\n\n<style scoped>\r\n\t.active{\r\n\t\tdisplay: none;\r\n\t}\r\n\t.login{\r\n\t\theight: 100vh;\r\n\t}\r\n\t.login-head{\r\n\t\tdisplay: flex;\r\n\t\theight: 10%;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #B3C0D1;\r\n\t\tline-height: 70px;\r\n\t\ttext-align: center;\r\n\t\tcolor: white;\r\n\t\tfont-size: 60px;\r\n\t\tfont-weight: 700;\r\n\t\tfont-family: \"华文行楷\";\r\n\t}\r\n\t.login-main{\r\n\t\theight: 90%;\r\n\t\tposition: relative;\r\n\t}\r\n\t.item{\r\n\t\tmargin: 0;\r\n\t}\r\n\t.login-box{\r\n\t\theight:80%;\r\n\t\twidth:30%;\r\n\t\tborder-radius: 20px;\r\n\t\tbox-shadow: 2px 2px 2px #E5E5E5, -2px -2px 2px #E5E5E5; \r\n\t\tbackground-color:#ffffff;\r\n\t\tposition:absolute;\r\n\t\ttop:15%;\r\n\t\tleft:35%;\r\n\t}\r\n\t.box-head{\r\n\t\twidth: 100%;\r\n\t\t\r\n\t}\r\n\t.text{\r\n\t\tmargin-top: 40px;\r\n\t\ttext-align: center;\r\n\t\tline-height: 60px;\r\n\t\tfont-size: 20px;\r\n\t}\r\n\t.ma-context{\r\n\t\tmargin-top: 50px;\r\n\t\tmargin-left: 20px;\r\n\t\twidth: 70%;\r\n\t}\r\n\t.mi-context{\r\n\t\tmargin-top: 50px;\r\n\t\tmargin-left: 20px;\r\n\t\twidth: 70%;\r\n\t}\r\n\t\n</style>\n"]}]}