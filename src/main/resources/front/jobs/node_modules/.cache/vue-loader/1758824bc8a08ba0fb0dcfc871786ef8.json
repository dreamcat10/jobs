{"remainingRequest":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\H5\\project\\HBuilderProjects\\jobs\\src\\views\\community\\Community.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\src\\views\\community\\Community.vue","mtime":1678101560088},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673771979702},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\babel-loader\\lib\\index.js","mtime":1673772004305},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1673771979702},{"path":"D:\\H5\\project\\HBuilderProjects\\jobs\\node_modules\\vue-loader\\lib\\index.js","mtime":1673772000036}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TopBar from \"@/components/common/TopBar.vue\"\n\nimport { mapState} from 'vuex'\nimport {news,start} from '@/network/news.js'\nexport default{\n\tname: \"Community\",\n\tdata(){\n\t\treturn{\n\t\t\tnewsInfo: [],\n\t\t\tsize: 3,\n\t\t\ttype: 0,\n\t\t\tcurrent: 0,\n\t\t\ttotal: 0,\n\t\t\tisLoading: true,\n\t\t\ttypes: ['点赞数','发布时间']\n\t\t} \n\t},\n\tcomputed:{\n\t\t...mapState(['empInfo']),\n\t},\n\tcomponents:{\n\t\tTopBar\n\t},\n\tmounted() {\n\t\t\n\t},\n\tmethods:{\n\t\tchangeType(type){\n\t\t\tthis.type = type\n\t\t\tthis.current = 0\n\t\t\tthis.isLoading = true\n\t\t\tthis.newsInfo = []\n\t\t\tthis.load()\n\t\t},\n\t\tlike(news){\n\t\t\tnews.isStart = !news.isStart\n\t\t\tif(news.isStart){\n\t\t\t\tnews.starts += 1;\n\t\t\t}else{\n\t\t\t\tnews.starts -= 1;\n\t\t\t}\n\t\t\tstart(news, this.empInfo.id)\n\t\t},\n\t\tdetail(news){\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'newsDetail',\n\t\t\t\tparams:{\n\t\t\t\t\tid: news.id\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tload(){\n\t\t\tif(this.isLoading){\n\t\t\t\tthis.isLoading = false\n\t\t\t\tthis.current += 1;\n\t\t\t\tnews(this.empInfo.id,this.current,this.size,this.type).then(res => {\n\t\t\t\t\tif(res.data.code == 200){\n\t\t\t\t\t\tconsole.log(res.data.data)\n\t\t\t\t\t\tthis.newsInfo = this.newsInfo.concat(res.data.data.recodes);\n\t\t\t\t\t\tthis.total = res.data.data.total;\n\t\t\t\t\t\tthis.isLoading = this.size*this.current > this.total ? false : true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t}\n}\n",{"version":3,"sources":["Community.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Community.vue","sourceRoot":"src/views/community","sourcesContent":["<template>\r\n\t<div class=\"app\">\r\n\t\t<TopBar :index=1></TopBar>\r\n\t\t<div class=\"main\">\r\n\t\t\t<div class=\"ul\">\r\n\t\t\t\t<ul class=\"infinite-list\" v-infinite-scroll=\"load\"\r\n\t\t\t\t\t\t\tstyle=\"overflow:auto\" :infinite-scroll-disabled=\"!isLoading\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<el-button type=\"text\" :class=\"{'news-btu':type == 1}\" @click=changeType(0)>点赞数</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" :class=\"{'news-btu':type == 0}\" @click=changeType(1)>发布时间</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<li v-for=\"news in newsInfo\" class=\"news-item\">\r\n\t\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t  <div class=\"news-item\">\r\n\t\t\t\t\t\t  <div class=\"item-info\">\r\n\t\t\t\t\t\t\t  <el-avatar :size= \"50\" :src= \"news.createAvatar\"></el-avatar>\r\n\t\t\t\t\t\t\t  <p style=\"margin-left: 20px; line-height: 10px;\">{{news.createName}}</p>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t<div class=\"item-left\">\r\n\t\t\t\t\t\t\t<p @click=\"detail(news)\">{{news.title}}</p>\r\n\t\t\t\t\t\t\t<span class=\"text-name\">{{news.content}}</span>\r\n\t\t\t\t\t\t\t<div style=\"display: flex;\">\r\n\t\t\t\t\t\t\t\t <span @click=\"like(news)\" class=\"like\">\r\n\t\t\t\t\t\t\t\t\t <img src=\"../../assets/img/dianzan-off.png\" v-show=\"!news.isStart\"/>\r\n\t\t\t\t\t\t\t\t\t<img src=\"../../assets/img/dianzan-on.png\" v-show=\"news.isStart\"></img>\r\n\t\t\t\t\t\t\t\t </span>\r\n\t\t\t\t\t\t\t\t <span class=\"like\">{{news.starts}}</span>\r\n\t\t\t\t\t\t\t\t<p style=\"font-size: 14px;font-weight: 500;margin-left: 76%;\">{{news.createTime}}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<p v-if=\"!isLoading\" style=\"text-align: center;\">没有更多了</p>\r\n\t\t\t\t\t<!-- <p v-else><i class=\"el-icon-loading\"></i>加载中</p> -->\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\n</template>\n\n<script>\r\n\timport TopBar from \"@/components/common/TopBar.vue\"\r\n\t\r\n\timport { mapState} from 'vuex'\r\n\timport {news,start} from '@/network/news.js'\r\n\texport default{\r\n\t\tname: \"Community\",\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tnewsInfo: [],\r\n\t\t\t\tsize: 3,\r\n\t\t\t\ttype: 0,\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\ttotal: 0,\r\n\t\t\t\tisLoading: true,\r\n\t\t\t\ttypes: ['点赞数','发布时间']\r\n\t\t\t} \r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState(['empInfo']),\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tTopBar\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tchangeType(type){\r\n\t\t\t\tthis.type = type\r\n\t\t\t\tthis.current = 0\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tthis.newsInfo = []\r\n\t\t\t\tthis.load()\r\n\t\t\t},\r\n\t\t\tlike(news){\r\n\t\t\t\tnews.isStart = !news.isStart\r\n\t\t\t\tif(news.isStart){\r\n\t\t\t\t\tnews.starts += 1;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnews.starts -= 1;\r\n\t\t\t\t}\r\n\t\t\t\tstart(news, this.empInfo.id)\r\n\t\t\t},\r\n\t\t\tdetail(news){\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'newsDetail',\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\tid: news.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tload(){\r\n\t\t\t\tif(this.isLoading){\r\n\t\t\t\t\tthis.isLoading = false\r\n\t\t\t\t\tthis.current += 1;\r\n\t\t\t\t\tnews(this.empInfo.id,this.current,this.size,this.type).then(res => {\r\n\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\tconsole.log(res.data.data)\r\n\t\t\t\t\t\t\tthis.newsInfo = this.newsInfo.concat(res.data.data.recodes);\r\n\t\t\t\t\t\t\tthis.total = res.data.data.total;\r\n\t\t\t\t\t\t\tthis.isLoading = this.size*this.current > this.total ? false : true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\t.main{\r\n\t\theight: 90%;\r\n\t\tbackground-color: #e9eef3;\r\n\t\tposition: relative;\r\n\t}\r\n\t.ul{\r\n\t\tposition: absolute;\r\n\t\tmargin: 20px 10%;\r\n\t\theight: 90%;\r\n\t\twidth: 80%;\r\n\t\tpadding: 20px 40px;\r\n\t\tborder-radius: 30px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\t.infinite-list{\r\n\t\theight: 93%;\r\n\t\tlist-style-type: none;\r\n\t}\r\n\t.news-item p{\r\n\t\tfont-size: 24px;\r\n\t\tfont-weight: 700;\r\n\t\tfont-family: \"KaiTi\"\r\n\t}\r\n\t.item-info{\r\n\t\tdisplay: flex;\r\n\t\tmargin-top: 20px;\r\n\t\theight: 40px;\r\n\t}\r\n\t.text-name{\r\n\t\t  display: inline-block;\r\n\t\t  width:900px;\r\n\t\t  overflow: hidden;\r\n\t\t  white-space: nowrap;\r\n\t\t  text-overflow: ellipsis;\r\n\t}\r\n\t.like {\r\n\t    cursor: pointer;\r\n\t    font-size: 15px;\r\n\t    display: inline-block;\r\n\t\tmargin-top: 17px;\r\n\t  }\r\n\t.like img{\r\n\t\theight: 15px;\r\n\t\twidth: 15px;\r\n\t}\r\n\t.news-item{\r\n\t\tborder: 0;\r\n\t}\r\n\t.news-btu{\r\n\t\tcolor: #000000;\r\n\t}\n</style>\n"]}]}